{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600%7CUbuntu:300,400,500,700" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap-reboot.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/bootstrap-grid.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/nouislider.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plyr.css' %}" />
    <link rel="stylesheet" href="{% static 'css/photoswipe.css' %}" />
    <link rel="stylesheet" href="{% static 'css/default-skin.css' %}" />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="{% static 'icon/favicon-32x32.png' %}" sizes="32x32" />
    <link rel="apple-touch-icon" href="{% static 'icon/favicon-32x32.png' %}" />
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'icon/apple-touch-icon-72x72.png' %}" />
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'icon/apple-touch-icon-114x114.png' %}" />
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'icon/apple-touch-icon-144x144.png' %}" />

    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Dmitry Volkov" />
    <title>My Profile</title>
  </head>
  <body class="body">
    <!-- header -->
    <header class="header">
      <div class="header__wrap">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="header__content">
                <!-- header logo -->
                <a href="{% url 'home:home' %}" class="header__logo"><img src="{% static 'img/logo.svg' %}" alt="FlixGo" /></a>
                <!-- end header logo -->

                <!-- header nav -->
                <ul class="header__nav">
                  <!-- dropdown -->
                  <li class="header__nav-item">
                    <a href="{% url 'home:home' %}" class="header__nav-link">Home</a>
                  </li>
                  <!-- end dropdown -->

                  <!-- dropdown -->
                  <li class="header__nav-item">
                    <a class="dropdown-toggle header__nav-link" href="#" role="button" id="dropdownMenuCatalog" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Catagory</a>

                    <ul class="dropdown-menu header__dropdown-menu" aria-labelledby="dropdownMenuCatalog">
                      <li>
                        <a href="catalog1.html">Movie</a>
                      </li>
                      <li>
                        <a href="catalog2.html">TV Series</a>
                      </li>
                      <li>
                        <a href="details1.html">Animation</a>
                      </li>
                    </ul>
                  </li>
                  <!-- end dropdown -->

                  <li class="header__nav-item">
                    <a href="faq.html" class="header__nav-link">Contact Us</a>
                  </li>

                  <!-- dropdown -->
                  <li class="dropdown header__nav-item">
                    <a class="dropdown-toggle header__nav-link header__nav-link--more" href="#" role="button" id="dropdownMenuMore" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon ion-ios-more"></i></a>

                    <ul class="dropdown-menu header__dropdown-menu" aria-labelledby="dropdownMenuMore">
                      <li>
                        <a href="https://www.imdb.com/chart/top/">250 IMDB Movies</a>
                      </li>
                      <li>
                        <a href="https://www.imdb.com/chart/toptv/">250 IMDB TV Series</a>
                      </li>
                      <li>
                        <a href="signup.html">About</a>
                      </li>
                    </ul>
                  </li>
                  <!-- end dropdown -->
                </ul>
                <!-- end header nav -->

                <!-- header auth -->
                <div class="header__auth">
                  <button class="header__search-btn" type="button"><i class="icon ion-ios-search"></i></button>

                  {% if request.user.is_authenticated %}
                    <li class="header__nav-item dropdown">
                      <a class="dropdown-toggle header__nav-link user-name-color" href="#" role="button" id="dropdownMenuCatalog" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ request.user.get_full_name|default:request.user.email }}</a>

                      <ul class="dropdown-menu header__dropdown-menu" aria-labelledby="dropdownMenuCatalog">
                        <li>
                          <a href="{% url 'account:profile' %}">
                            <i class="icon ion-ios-person"></i>
                            <span class="header__username">Profile</span>
                          </a>
                        </li>
                        <li>
                          <a href="{% url 'account:logout' %}">
                            <i class="icon ion-ios-log-out"></i>
                            <span>Logout</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                  {% else %}
                    <a href="{% url 'account:login' %}" class="header__sign-in">
                      <i class="icon ion-ios-log-in"></i>
                      <span>Login</span>
                    </a>
                  {% endif %}
                </div>

                <!-- end header auth -->

                <!-- header menu btn -->
                <button class="header__btn" type="button">
                  <span></span>
                  <span></span>
                  <span></span>
                </button>
                <!-- end header menu btn -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- header search -->
      <form action="#" class="header__search">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="header__search-content">
                <input type="text" placeholder="Search for a movie, TV Series that you are looking for" />

                <button type="submit">search</button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <!-- end header search -->
    </header>
    <!-- end header -->

    <!-- Profile Section -->
    <section class="section">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <h2 class="section__title">My Profile</h2>
          </div>
        </div>

        <div class="row">
          <!-- Profile Info -->
          <div class="col-12 col-md-4">
            <div class="card card--details">
              <div class="card__cover">
                {% if user.profile_image %}
                  <img src="{{ user.profile_image.url }}" alt="Profile Picture" class="profile-avatar" />
                {% else %}
                  <img src="{% static 'img/avatar.png' %}" alt="Profile Picture" />
                {% endif %}
                <div class="card__play">
                  <label for="{{ form.profile_image.id_for_label }}"><i class="icon ion-ios-camera"></i></label>
                </div>
              </div>
              <div class="card__content">
                <h3 class="card__title">{{ request.user.get_full_name|default:request.user.email }}</h3>
                <div class="card__rate">
                  <i class="icon ion-ios-star"></i>Member since {{ request.user.date_joined|date:'F Y' }}
                </div>
              </div>
            </div>

            <div class="section__text">
              <p>
                <strong>Username:</strong> {{ request.user.username }}
              </p>
              <p>
                <strong>Email:</strong> {{ request.user.email }}
              </p>
              <p>
                <strong>Last Login:</strong> {{ request.user.last_login|date:'d M Y, H:i' }}
              </p>
            </div>
          </div>

          <!-- Edit Form -->
          <div class="col-12 col-md-8">
            <div class="content__head">
              <h2 class="content__title">Edit Profile</h2>
            </div>

            <form class="form" method="post" enctype="multipart/form-data">
              {% csrf_token %}

              <div class="row">
                <div class="col-12 col-md-6">
                  <div class="form__group">
                    <label for="{{ form.first_name.id_for_label }}" class="form__label">First Name</label>
                    {{ form.first_name }}
                    {% for error in form.first_name.errors %}
                      <div class="form__error">{{ error }}</div>
                    {% endfor %}
                  </div>
                </div>

                <div class="col-12 col-md-6">
                  <div class="form__group">
                    <label for="{{ form.last_name.id_for_label }}" class="form__label">Last Name</label>
                    {{ form.last_name }}
                    {% for error in form.last_name.errors %}
                      <div class="form__error">{{ error }}</div>
                    {% endfor %}
                  </div>
                </div>

                <div class="col-12 col-md-6">
                  <div class="form__group">
                    <label for="{{ form.email.id_for_label }}" class="form__label">Email</label>
                    {{ form.email }}
                    {% for error in form.email.errors %}
                      <div class="form__error">{{ error }}</div>
                    {% endfor %}
                  </div>
                </div>

                <div class="col-12 col-md-6">
                  <div class="form__group">
                    <label for="{{ form.username.id_for_label }}" class="form__label">Username</label>
                    {{ form.username }}
                    {% for error in form.username.errors %}
                      <div class="form__error">{{ error }}</div>
                    {% endfor %}
                  </div>
                </div>

                <div class="col-12" hidden>
                  <div class="form__group">
                    <label for="{{ form.profile_image.id_for_label }}" class="form__label">Profile Picture</label>
                    <div class="file-upload">
                      <label for="{{ form.profile_image.id_for_label }}" class="file-upload__label">
                        <i class="icon ion-ios-cloud-upload"></i>
                        <span>Choose a file</span>
                      </label>
                      
                      {{ form.profile_image }}
                      {% for error in form.profile_image.errors %}
                        <div class="form__error">{{ error }}</div>
                      {% endfor %}
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form__group">
                    <label for="{{ form.bio.id_for_label }}" class="form__label">Bio</label>
                    {{ form.bio }}
                    {% for error in form.bio.errors %}
                      <div class="form__error">{{ error }}</div>
                    {% endfor %}
                  </div>
                </div>

                <div class="col-12">
                  <div class="form__group">
                    <label for="id_password" class="form__label">New Password (leave blank to keep current)</label>
                    <input type="password" name="password" class="form__input" id="id_password" />
                  </div>
                </div>

                <div class="col-12">
                  <div class="form__group">
                    <label for="id_password_confirm" class="form__label">Confirm New Password</label>
                    <input type="password" name="password_confirm" class="form__input" id="id_password_confirm" />
                  </div>
                </div>

                <div class="col-12">
                  <button type="submit" class="form__btn">Save Changes</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- JS -->
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/jquery.mousewheel.min.js' %}"></script>
    <script src="{% static 'js/jquery.mCustomScrollbar.min.js' %}"></script>
    <script src="{% static 'js/wNumb.js' %}"></script>
    <script src="{% static 'js/nouislider.min.js' %}"></script>
    <script src="{% static 'js/plyr.min.js' %}"></script>
    <script src="{% static 'js/jquery.morelines.min.js' %}"></script>
    <script src="{% static 'js/photoswipe.min.js' %}"></script>
    <script src="{% static 'js/photoswipe-ui-default.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    
  </body>
</html>
